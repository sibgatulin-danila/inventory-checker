<%- include('partials/head') %>

<div id="main">
    <div class="inner">

        <%- include('partials/header') %>

        <!-- Tables -->
        <section class="container">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="section-heading">
                            <h3 class="mb-5">Поиск оборудования:</h3>
                            <form action="/equipments/search" method="post">
                                <div class="row forms">
                                    <div class="col-3">
                                        <fieldset>
                                            <input type="text" name="inventoryCode" placeholder="#" autocomplete="off" >
                                        </fieldset>
                                    </div>
                                    <div class="col-3">
                                        <fieldset>
                                            <input type="text" list="types" name="type" placeholder="Тип" >
                                            <datalist id="types">
                                                <% equipmentTypes.forEach(function (type) { %>
                                                    <option><%- type %></option>
                                                <% }) %>
                                            </datalist>
                                        </fieldset>
                                    </div>
                                    <div class="col-3">
                                        <fieldset>
                                            <input type="text" list="subtypes" name="subtype" placeholder="Подтип" >
                                            <datalist id="subtypes">
                                                <% equipmentSubtypes.forEach(function (subtype) { %>
                                                    <option><%- subtype %></option>
                                                <% }) %>
                                            </datalist>
                                        </fieldset>
                                    </div>
                                    <div class="col-3">
                                        <fieldset>
                                            <input type="text" list="brands" name="brand" placeholder="Марка" >
                                            <datalist id="brands">
                                                <% equipmentBrands.forEach(function (brand) { %>
                                                    <option><%- brand %></option>
                                                <% }) %>
                                            </datalist>
                                        </fieldset>
                                    </div>
                                    <div class="col-6">
                                        <fieldset>
                                            <input type="text" name="name" placeholder="Наименование" autocomplete="off" >
                                        </fieldset>
                                    </div>
                                    <div class="col-6">
                                        <fieldset>
                                            <input type="text" list="usernames" name="username" placeholder="Пользователь (username)" >
                                            <datalist id="usernames">
                                                <% usernames.forEach(function (username) { %>
                                                    <option><%- username %></option>
                                                <% }) %>
                                            </datalist>
                                        </fieldset>
                                    </div>
                                    <div class="col-6">
                                        <div class="radio-item">
                                            <input name="withoutUser" type="checkbox" id="withoutUser" value="true">
                                            <label for="withoutUser">Оборудование без ответственного</label>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="radio-item">
                                            <input name="isDeleted" type="checkbox" id="isDeleted" value="true">
                                            <label for="isDeleted">Списанное оборудование</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <fieldset>
                                            <button>Поиск</button>
                                        </fieldset>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="section-heading mt-5">
                            <h2>Список оборудования</h2>
                        </div>
                        <div class="alternate-table">
                            <table>
                                <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Наименование</th>
                                    <th>Тип</th>
                                    <th>Подтип</th>
                                    <th>Марка</th>
                                    <th>Опции</th>
                                </tr>
                                </thead>
                                <tbody>
                                <% equipments.forEach(function (equipment) { %>
                                    <tr>
                                        <td><%- equipment.inventoryCode %></td>
                                        <td><%- equipment.name %></td>
                                        <td><%- equipment.type %></td>
                                        <td><%- equipment.subtype %></td>
                                        <td><%- equipment.brand %></td>
                                        <td class="d-flex">
                                            <a href="/equipments/<%- equipment._id %>">
                                                <div data-v-dedbcfaa="" class="lottie animation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="30" height="30" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px);"><defs><clipPath id="__lottie_element_11"><rect width="24" height="24" x="0" y="0"></rect></clipPath><filter id="__lottie_element_16" filterUnits="objectBoundingBox" x="0%" y="0%" width="100%" height="100%"><feComponentTransfer in="SourceGraphic"><feFuncA type="table" tableValues="1.0 0.0"></feFuncA></feComponentTransfer></filter><mask id="__lottie_element_12" mask-type="alpha"><g filter="url(#__lottie_element_16)"><rect width="24" height="24" x="0" y="0" fill="#ffffff" opacity="0"></rect><g transform="matrix(0.9999799132347107,-0.00010522989759920165,0.00010522989759920165,0.9999799132347107,-0.0010213851928710938,0.0015039443969726562)" opacity="1" style="display: block;"><g opacity="0" transform="matrix(1,0,0,1,0,0)"><path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="10" stroke="rgb(0,0,0)" stroke-opacity="1" stroke-width="2" d=" M8,17 C8,17 8.00100040435791,17.00200080871582 8.00100040435791,17.00200080871582"></path></g><g opacity="0" transform="matrix(1,0,0,1,0,0)"><path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="10" stroke="rgb(0,0,0)" stroke-opacity="1" stroke-width="2" d=" M8,13 C8,13 8.00100040435791,13 8.00100040435791,13"></path></g><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="10" stroke="rgb(0,0,0)" stroke-opacity="1" stroke-width="2" d=" M8,17 C8,17 16,17 16,17"></path></g><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="10" stroke="rgb(0,0,0)" stroke-opacity="1" stroke-width="2" d=" M8,13 C8,13 15.882267951965332,13 15.882267951965332,13"></path></g><g opacity="1" transform="matrix(1,0,0,1,15.75,6.25)"><path fill="rgb(0,0,0)" fill-opacity="1" d=" M2.7500038146972656,2.748704433441162 C2.7500038146972656,2.748704433441162 -2.7486066818237305,2.7486066818237305 -2.7486066818237305,2.7486066818237305 C-2.7486066818237305,2.7486066818237305 -2.748704433441162,-2.7500038146972656 -2.748704433441162,-2.7500038146972656 C-2.748704433441162,-2.7500038146972656 0.0006992389680817723,-0.0006992389680817723 0.0006992389680817723,-0.0006992389680817723 C0.0006992389680817723,-0.0006992389680817723 2.7500038146972656,2.748704433441162 2.7500038146972656,2.748704433441162z"></path></g></g></g></mask></defs><g clip-path="url(#__lottie_element_11)"><g mask="url(#__lottie_element_12)" style="display: block;"><g transform="matrix(0.9999799132347107,-0.00010522989759920165,0.00010522989759920165,0.9999799132347107,-0.0010213851928710938,0.0015039443969726562)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,12,12)"><path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="10" stroke="rgb(0,0,0)" stroke-opacity="1" stroke-width="2" d=" M7,8 C7,8.550999641418457 6.551000118255615,9 6,9 C6,9 -6,9 -6,9 C-6.551000118255615,9 -7,8.550999641418457 -7,8 C-7,8 -7,-8 -7,-8 C-7,-8.550999641418457 -6.551000118255615,-9 -6,-9 C-6,-9 1.5871158838272095,-9 1.5871158838272095,-9 C1.5872573852539062,-9 7,-3.5872535705566406 7,-3.58711576461792 C7,-3.58711576461792 7,8 7,8z"></path><path fill="rgb(0,0,0)" fill-opacity="1" d=" M7,8 C7,8.550999641418457 6.551000118255615,9 6,9 C6,9 -6,9 -6,9 C-6.551000118255615,9 -7,8.550999641418457 -7,8 C-7,8 -7,-8 -7,-8 C-7,-8.550999641418457 -6.551000118255615,-9 -6,-9 C-6,-9 1.5871158838272095,-9 1.5871158838272095,-9 C1.5872573852539062,-9 7,-3.5872535705566406 7,-3.58711576461792 C7,-3.58711576461792 7,8 7,8z"></path></g></g></g></g></svg></div>
                                            </a>
                                            <% if (rootUser && rootUser.role === 'admin') { %>
                                            <a href="/equipments/<%- equipment._id %>/moves">
                                                <div data-v-115389dc="" draggable="true" class="app-icon is-m_two_tone is-custom-size" style="width: 30px; height: 30px; fill: rgb(0, 0, 0);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 22H5c-1.654 0-3-1.346-3-3V8h2v11c0 .552.449 1 1 1h14c.552 0 1-.448 1-1v-2h2v2C22 20.654 20.654 22 19 22zM16.707 11.707L15.293 10.293 18.586 7 15.293 3.707 16.707 2.293 21.414 7z"></path><path d="M8,18H6v-1c0-6.065,4.935-11,11-11h3v2h-3c-4.963,0-9,4.037-9,9V18z"></path></svg></div>
                                            </a>
                                            <a href="/equipments/<%- equipment._id %>/repairs">
                                                <div data-v-115389dc="" draggable="true" class="app-icon is-m_two_tone is-custom-size" style="width: 30px; height: 30px; fill: rgb(0, 0, 0);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="#fff" d="M19.7,7.3L18,9h-3V6l1.7-1.7C16.2,4.1,15.6,4,15,4c-2.8,0-5,2.3-5,5.1c0,0.6,0.1,1.1,0.3,1.6 l-6.6,6.5c-0.9,0.9-0.9,2.3,0,3.2s2.3,0.9,3.2,0l6.6-6.5c0.5,0.2,1,0.2,1.6,0.2c2.8,0,5-2.2,5-4.9C20,8.5,19.9,7.9,19.7,7.3z"></path><path d="M5.2,22c-0.9,0-1.7-0.3-2.3-1c-1.3-1.3-1.3-3.3,0-4.6l6.2-6.1C9.1,9.9,9,9.5,9,9.1C9,5.7,11.7,3,15,3c0.7,0,1.4,0.1,2,0.4 l1.5,0.5L16,6.4V8h1.6l2.5-2.5L20.6,7C20.9,7.7,21,8.4,21,9.1c0,3.3-2.6,5.9-6,5.9c-0.4,0-0.8,0-1.3-0.1l-6.2,6.1 C6.9,21.7,6.1,22,5.2,22z M14.6,5c-2,0.2-3.6,1.9-3.6,4c0,0.4,0.1,0.8,0.2,1.3l0.2,0.6l-7.1,6.9c-0.5,0.5-0.5,1.3,0,1.8 c0.5,0.5,1.3,0.5,1.7,0l7.1-6.9l0.6,0.2C14.1,13,14.5,13,15,13c2.1,0,3.8-1.5,4-3.6L18.4,10H14V5.6L14.6,5z"></path><path d="M19.7,7.3L18,9h-3V6l1.7-1.7C16.2,4.1,15.6,4,15,4c-2.8,0-5,2.3-5,5.1 c0,0.6,0.1,1.1,0.3,1.6l-6.6,6.5c-0.9,0.9-0.9,2.3,0,3.2s2.3,0.9,3.2,0l6.6-6.5c0.5,0.2,1,0.2,1.6,0.2c2.8,0,5-2.2,5-4.9 C20,8.5,19.9,7.9,19.7,7.3z" opacity=".3"></path></svg></div>
                                            </a>
                                            <% } %>
                                        </td>
                                    </tr>
                                <% }) %>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>
</div>

<%- include('partials/sidebar') %>

<%- include('partials/footer') %>
